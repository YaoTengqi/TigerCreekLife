# 虎溪生活

## 整体流程

 SpringBoot框架 -> Redis数据库 -> MySQL数据库



### 分布式锁

 	1. **需求原因：**当部署在多台JVM时会出现不同JVM进程并发访问业务的问题，会导致业务的內部锁失效，因此需要使用分布式锁
 	2. **模拟方法：**使用SpringBoot启动两个端口，并在nginx上修改配置文件反向代理到这两个端口上模拟分布式部署业务，并通过postman等进行接口测试
 	3. **需求实现：**通过redis来实现不同JVM进程间的锁，完成所有JVM共享同一把锁(**跨进程锁**)，因为redis可以被所有机器都看到，可以用来维护一把锁
     		1. ``tryLock``:获取互斥锁，将UUID拼接进程的id(可以区分不同JVM机器的不同线程)存入用户名的锁中
     		1. ``unlock``:释放锁的时候需要查看要释放的锁信息是否和以前相同，以防出现出现误删的问题。